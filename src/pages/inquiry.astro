---
import BaseLayout from '../layouts/BaseLayout.astro';
---

<BaseLayout 
  title="Inquiry - Get in Touch | Lusoi Gardens"
  activePage="contact"
  description="Have questions about Lusoi Gardens? Send us an inquiry about accommodations, activities, events, or special requests. We're here to help plan your perfect stay."
  keywords="Lusoi Gardens inquiry, booking inquiry, resort questions, accommodation inquiry Kenya"
  ogImage="/images/landscape-2.jpg"
>
	<div class="hero-wrap" style="background-image: url('/images/landscape-2.jpg');">
    <div class="overlay"></div>
    <div class="container">
      <div class="row no-gutters slider-text d-flex align-itemd-end justify-content-center">
        <div class="col-md-9 ftco-animate text-center d-flex align-items-end justify-content-center">
        	<div class="text">
            <p class="breadcrumbs mb-2"><span class="mr-2"><a href="/">Home</a></span> <span>Inquiry</span></p>
            <h1 class="mb-4 bread">Send Us an Inquiry</h1>
          </div>
        </div>
      </div>
    </div>
  </div>

	<section class="ftco-section contact-section bg-light">
    <div class="container">
      <div class="row justify-content-center mb-5">
        <div class="col-md-7 text-center">
          <h2 class="mb-4">We're Here to Help</h2>
          <p>Have questions about accommodations, activities, events, or special requests? Fill out the form below and we'll get back to you as soon as possible.</p>
        </div>
      </div>
      <div class="row justify-content-center">
        <div class="col-md-8">
          <form id="inquiry-form" class="bg-white p-5 contact-form">
            <div id="form-message" class="alert" style="display: none;"></div>
            <div class="form-group">
              <label for="name">Your Name *</label>
              <input type="text" name="name" id="name" class="form-control" placeholder="Your Name" required>
            </div>
            <div class="form-group">
              <label for="email">Your Email *</label>
              <input type="email" name="email" id="email" class="form-control" placeholder="Your Email" required>
            </div>
            <div class="form-group">
              <label for="phone">Phone Number</label>
              <input type="tel" name="phone" id="phone" class="form-control" placeholder="Your Phone Number">
            </div>
            <div class="form-group">
              <label for="inquiry-type">Inquiry Type *</label>
              <select name="inquiry-type" id="inquiry-type" class="form-control" required>
                <option value="">Select Inquiry Type</option>
                <option value="accommodation">Accommodation / Room Booking</option>
                <option value="activities">Activities & Experiences</option>
                <option value="events">Meetings & Events</option>
                <option value="dining">Dining & Restaurant</option>
                <option value="special-request">Special Request</option>
                <option value="other">Other</option>
              </select>
            </div>
            <div class="form-group">
              <label for="check-in">Preferred Check-in Date</label>
              <input type="date" name="check-in" id="check-in" class="form-control">
            </div>
            <div class="form-group">
              <label for="check-out">Preferred Check-out Date</label>
              <input type="date" name="check-out" id="check-out" class="form-control">
            </div>
            <div class="form-group">
              <label for="guests">Number of Guests</label>
              <input type="number" name="guests" id="guests" class="form-control" placeholder="Number of Guests" min="1">
            </div>
            <div class="form-group">
              <label for="subject">Subject *</label>
              <input type="text" name="subject" id="subject" class="form-control" placeholder="Subject" required>
            </div>
            <div class="form-group">
              <label for="message">Your Message *</label>
              <textarea name="message" id="message" cols="30" rows="7" class="form-control" placeholder="Please provide details about your inquiry..." required></textarea>
            </div>
            <div class="form-group">
              <input type="submit" value="Send Inquiry" class="btn btn-primary py-3 px-5" id="submit-btn">
            </div>
          </form>
        </div>
      </div>
      <div class="row justify-content-center mt-5">
        <div class="col-md-8 text-center">
          <h3 class="mb-4">Or Contact Us Directly</h3>
          <p class="mb-3">
            <strong>Phone:</strong> <a href="tel://+254797590865">+254 797 590 865</a><br>
            <strong>Email:</strong> <a href="mailto:reservations@lusoigardens.com">reservations@lusoigardens.com</a>
          </p>
          <a href="/contact" class="btn btn-secondary py-2 px-4 mr-2">View Contact Page</a>
          <a href="/" class="btn btn-primary py-2 px-4">Return Home</a>
        </div>
      </div>
    </div>
  </section>

  <script>
    const form = document.getElementById('inquiry-form') as HTMLFormElement;
    const messageDiv = document.getElementById('form-message') as HTMLDivElement;
    const submitBtn = document.getElementById('submit-btn') as HTMLInputElement;

    form.addEventListener('submit', async (e) => {
      e.preventDefault();
      
      // Disable submit button
      submitBtn.disabled = true;
      submitBtn.value = 'Sending...';
      
      // Hide previous messages
      messageDiv.style.display = 'none';
      
      const formData = new FormData(form);
      
      try {
        const response = await fetch('/api/inquiry', {
          method: 'POST',
          body: formData,
        });
        
        const data = await response.json();
        
        if (data.success) {
          messageDiv.className = 'alert alert-success';
          messageDiv.textContent = data.message;
          messageDiv.style.display = 'block';
          form.reset();
        } else {
          messageDiv.className = 'alert alert-danger';
          messageDiv.textContent = data.error || 'An error occurred. Please try again.';
          messageDiv.style.display = 'block';
        }
      } catch (error) {
        messageDiv.className = 'alert alert-danger';
        messageDiv.textContent = 'An error occurred while sending your inquiry. Please try again later.';
        messageDiv.style.display = 'block';
      } finally {
        submitBtn.disabled = false;
        submitBtn.value = 'Send Inquiry';
      }
    });
  </script>
</BaseLayout>

