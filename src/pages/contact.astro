---
import BaseLayout from '../layouts/BaseLayout.astro';
---

<BaseLayout 
  title="Contact Lusoi Gardens - Get in Touch | Mount Kenya Resort"
  activePage="contact"
  description="Contact Lusoi Gardens for bookings, inquiries, or more information about our nature retreat near Mount Kenya. Located in Nyeri, Kenya. We're here to help plan your perfect getaway."
  keywords="contact Lusoi Gardens, Lusoi Gardens booking, Mount Kenya resort contact, Nyeri Kenya resort, resort inquiries, accommodation booking Kenya"
  ogImage="/images/landscape-2.jpg"
>
	<div class="hero-wrap" style="background-image: url('/images/landing-3.jpg');">
    <div class="overlay"></div>
    <div class="container">
      <div class="row no-gutters slider-text d-flex align-itemd-end justify-content-center">
        <div class="col-md-9 ftco-animate text-center d-flex align-items-end justify-content-center">
        	<div class="text">
            <p class="breadcrumbs mb-2"><span class="mr-2"><a href="/">Home</a></span> <span>Contact</span></p>
            <h1 class="mb-4 bread">Contact us</h1>
          </div>
        </div>
      </div>
    </div>
  </div>

	<section class="ftco-section contact-section bg-light">
    <div class="container">
      <div class="row d-flex mb-5 contact-info">
        <div class="col-md-12 mb-4">
          <h2 class="h3">Contact Information</h2>
        </div>
        <div class="w-100"></div>
        <div class="col-md-4 d-flex">
        	<div class="info bg-white p-4">
            <p><span>Address:</span> Nyeri, Kenya</p>
          </div>
        </div>
        <div class="col-md-4 d-flex">
        	<div class="info bg-white p-4">
            <p><span>Phone:</span> <a href="tel://+254 797 590 865">+254 797 590 865</a></p>
          </div>
        </div>
        <div class="col-md-4 d-flex">
        	<div class="info bg-white p-4">
            <p><span>Email:</span> <a href="mailto:reservations@lusoigardens.com">reservations@lusoigardens.com</a></p>
          </div>
        </div>
      </div>
      <div class="row block-9">
        <div class="col-md-6 order-md-last d-flex">
          <form id="contact-form" class="bg-white p-5 contact-form">
            <div id="form-message" class="alert" style="display: none;"></div>
            <div class="form-group">
              <input type="text" name="name" id="name" class="form-control" placeholder="Your Name" required>
            </div>
            <div class="form-group">
              <input type="email" name="email" id="email" class="form-control" placeholder="Your Email" required>
            </div>
            <div class="form-group">
              <input type="text" name="subject" id="subject" class="form-control" placeholder="Subject" required>
            </div>
            <div class="form-group">
              <textarea name="message" id="message" cols="30" rows="7" class="form-control" placeholder="Message" required></textarea>
            </div>
            <div class="form-group">
              <input type="submit" value="Send Message" class="btn btn-primary py-3 px-5" id="submit-btn">
            </div>
          </form>
        
        </div>

        <div class="col-md-6 d-flex">
        	<iframe src="https://www.google.com/maps?q=-0.259712,37.048564&output=embed" width="100%" height="450" style="border:0;" allowfullscreen="" loading="lazy" referrerpolicy="no-referrer-when-downgrade"></iframe>
        </div>
      </div>
    </div>
  </section>

  <script>
    const form = document.getElementById('contact-form') as HTMLFormElement;
    const messageDiv = document.getElementById('form-message') as HTMLDivElement;
    const submitBtn = document.getElementById('submit-btn') as HTMLInputElement;

    form.addEventListener('submit', async (e) => {
      e.preventDefault();
      
      // Disable submit button
      submitBtn.disabled = true;
      submitBtn.value = 'Sending...';
      
      // Hide previous messages
      messageDiv.style.display = 'none';
      
      const formData = new FormData(form);
      
      try {
        const response = await fetch('/api/contact', {
          method: 'POST',
          body: formData,
        });
        
        const data = await response.json();
        
        if (data.success) {
          messageDiv.className = 'alert alert-success';
          messageDiv.textContent = data.message;
          messageDiv.style.display = 'block';
          form.reset();
        } else {
          messageDiv.className = 'alert alert-danger';
          messageDiv.textContent = data.error || 'An error occurred. Please try again.';
          messageDiv.style.display = 'block';
        }
      } catch (error) {
        messageDiv.className = 'alert alert-danger';
        messageDiv.textContent = 'An error occurred while sending your message. Please try again later.';
        messageDiv.style.display = 'block';
      } finally {
        submitBtn.disabled = false;
        submitBtn.value = 'Send Message';
      }
    });
  </script>
</BaseLayout>
