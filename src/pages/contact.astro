---
import BaseLayout from '../layouts/BaseLayout.astro';
---

<BaseLayout 
  title="Inquiry - Get in Touch | Lusoi Gardens"
  activePage="contact"
  description="Have questions about Lusoi Gardens? Send us an inquiry about accommodations, activities, events, or special requests. We're here to help plan your perfect stay."
  keywords="Lusoi Gardens inquiry, booking inquiry, resort questions, accommodation inquiry Kenya"
  ogImage="/images/landscape-2.jpg"
>
	<div class="hero-wrap" style="background-image: url('/images/landing-3.jpg');">
    <div class="overlay"></div>
    <div class="container">
      <div class="row no-gutters slider-text d-flex align-itemd-end justify-content-center">
        <div class="col-md-9 ftco-animate text-center d-flex align-items-end justify-content-center">
        	<div class="text">
            <p class="breadcrumbs mb-2"><span class="mr-2"><a href="/">Home</a></span> <span>Inquiry</span></p>
            <h1 class="mb-4 bread">Send Us an Inquiry</h1>
          </div>
        </div>
      </div>
    </div>
  </div>

	<section class="ftco-section contact-section bg-light">
    <div class="container">
      <div class="row justify-content-center mb-5">
        <div class="col-md-7 text-center">
          <h2 class="mb-4">We're Here to Help</h2>
          <p>Have questions about accommodations, activities, events, or special requests? Fill out the form below and we'll get back to you as soon as possible.</p>
        </div>
      </div>
      <div class="row block-9">
        <div class="col-md-6 order-md-last d-flex">
          <form id="inquiry-form" class="bg-white p-5 contact-form">
            <div id="form-message" class="alert" style="display: none;"></div>
            <div class="form-group">
              <label for="name">Your Name *</label>
              <input type="text" name="name" id="name" class="form-control" placeholder="Your Name" required>
            </div>
            <div class="form-group">
              <label for="email">Your Email *</label>
              <input type="email" name="email" id="email" class="form-control" placeholder="Your Email" required>
            </div>
            <div class="form-group">
              <label for="phone">Phone Number</label>
              <input type="tel" name="phone" id="phone" class="form-control" placeholder="Your Phone Number">
            </div>
            <div class="form-group">
              <label for="inquiry-type">Inquiry Type *</label>
              <select name="inquiry-type" id="inquiry-type" class="form-control" required>
                <option value="">Select Inquiry Type</option>
                <option value="accommodation">Accommodation / Room Booking</option>
                <option value="activities">Activities & Experiences</option>
                <option value="events">Meetings & Events</option>
                <option value="dining">Dining & Restaurant</option>
                <option value="special-request">Special Request</option>
                <option value="other">Other</option>
              </select>
            </div>
            <div class="form-group">
              <label for="check-in">Preferred Check-in Date</label>
              <input type="date" name="check-in" id="check-in" class="form-control">
            </div>
            <div class="form-group">
              <label for="check-out">Preferred Check-out Date</label>
              <input type="date" name="check-out" id="check-out" class="form-control">
            </div>
            <div class="form-group">
              <label for="guests">Number of Guests</label>
              <input type="number" name="guests" id="guests" class="form-control" placeholder="Number of Guests" min="1">
            </div>
            <div class="form-group">
              <label for="subject">Subject *</label>
              <input type="text" name="subject" id="subject" class="form-control" placeholder="Subject" required>
            </div>
            <div class="form-group">
              <label for="message">Your Message *</label>
              <textarea name="message" id="message" cols="30" rows="7" class="form-control" placeholder="Please provide details about your inquiry..." required></textarea>
            </div>
            <div class="form-group">
              <input type="submit" value="Send Inquiry" class="btn btn-primary py-3 px-5" id="submit-btn">
            </div>
          </form>
        </div>

        <div class="col-md-6 d-flex flex-column">
          <iframe src="https://www.google.com/maps?q=-0.259712,37.048564&output=embed" width="100%" style="border:0; flex: 1; min-height: 400px;" allowfullscreen="" loading="lazy" referrerpolicy="no-referrer-when-downgrade"></iframe>
          <div class="inquiry-contact-info bg-white p-4 mt-3">
            <h4>Contact Us Directly</h4>
            <p><span>Phone:</span> <a href="tel://+254797590865">+254 797 590 865</a></p>
            <p><span>Email:</span> <a href="mailto:reservations@lusoigardens.com">reservations@lusoigardens.com</a></p>
            <p><span>Address:</span> Nyeri, Kenya</p>
          </div>
        </div>
      </div>
    </div>
  </section>

  <script>
    const form = document.getElementById('inquiry-form') as HTMLFormElement;
    const messageDiv = document.getElementById('form-message') as HTMLDivElement;
    const submitBtn = document.getElementById('submit-btn') as HTMLInputElement;

    form.addEventListener('submit', async (e) => {
      e.preventDefault();
      
      // Disable submit button
      submitBtn.disabled = true;
      submitBtn.value = 'Sending...';
      
      // Hide previous messages
      messageDiv.style.display = 'none';
      
      const formData = new FormData(form);
      
      try {
        const response = await fetch('/api/inquiry', {
          method: 'POST',
          body: formData,
        });
        
        const data = await response.json();
        
        if (data.success) {
          messageDiv.className = 'alert alert-success';
          messageDiv.textContent = data.message;
          messageDiv.style.display = 'block';
          form.reset();
        } else {
          messageDiv.className = 'alert alert-danger';
          messageDiv.textContent = data.error || 'An error occurred. Please try again.';
          messageDiv.style.display = 'block';
        }
      } catch (error) {
        messageDiv.className = 'alert alert-danger';
        messageDiv.textContent = 'An error occurred while sending your inquiry. Please try again later.';
        messageDiv.style.display = 'block';
      } finally {
        submitBtn.disabled = false;
        submitBtn.value = 'Send Inquiry';
      }
    });
  </script>
</BaseLayout>

<style>
  .inquiry-contact-info h4 {
    font-family: 'Playfair Display', serif;
    font-size: 20px;
    color: #000;
    margin-bottom: 0.8em;
  }

  .inquiry-contact-info p {
    margin-bottom: 0.4em;
    color: #666;
    font-size: 15px;
  }

  .inquiry-contact-info p span {
    font-weight: 600;
    color: #000;
  }

  .inquiry-contact-info a {
    color: #b69100;
  }
</style>

