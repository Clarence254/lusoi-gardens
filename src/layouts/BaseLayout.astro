---
import Navbar from '../components/Navbar.astro';
import Footer from '../components/Footer.astro';

interface Props {
  title?: string;
  activePage?: string;
  description?: string;
  ogImage?: string;
  canonicalUrl?: string;
  keywords?: string;
  noindex?: boolean;
  structuredData?: object;
}

const { 
  title = 'Lusoi Gardens', 
  activePage,
  description = 'Lusoi Gardens - Your Gateway to Nature, Adventure & Serenity.',
  ogImage = '/images/lusoi-gardens-logo.png',
  canonicalUrl,
  keywords = 'Lusoi Gardens, resort Kenya, Mount Kenya accommodation, nature retreat, family getaway, adventure activities, Nanyuki resort, Kenya tourism',
  noindex = false,
  structuredData
} = Astro.props;

const siteUrl = Astro.site?.href || 'https://lusoigardens.com';
const currentUrl = canonicalUrl || new URL(Astro.url.pathname, siteUrl).href;
const fullImageUrl = ogImage.startsWith('http') ? ogImage : `${siteUrl}${ogImage}`;

// Default structured data for LocalBusiness/Resort
const defaultStructuredData = {
  "@context": "https://schema.org",
  "@type": "Resort",
  "name": "Lusoi Gardens",
  "description": description,
  "url": siteUrl,
  "image": fullImageUrl,
  "address": {
    "@type": "PostalAddress",
    "addressCountry": "KE",
    "addressRegion": "Laikipia County",
    "addressLocality": "Nanyuki"
  },
  "geo": {
    "@type": "GeoCoordinates",
    "latitude": "0.0167",
    "longitude": "37.0731"
  },
  "priceRange": "$$",
  "amenityFeature": [
    {
      "@type": "LocationFeatureSpecification",
      "name": "Nature Walks",
      "value": true
    },
    {
      "@type": "LocationFeatureSpecification",
      "name": "Kids Park",
      "value": true
    },
    {
      "@type": "LocationFeatureSpecification",
      "name": "Mountain Bike Trails",
      "value": true
    },
    {
      "@type": "LocationFeatureSpecification",
      "name": "Restaurant",
      "value": true
    }
  ]
};

const finalStructuredData = structuredData || defaultStructuredData;
---

<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  
  <!-- Google tag (gtag.js) -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-4FXG6F0VVB"></script>
  <script is:inline>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());
    gtag('config', 'G-4FXG6F0VVB');
  </script>
  
  <title>{title}</title>
  <meta name="description" content={description} />
  <meta name="keywords" content={keywords} />
  <meta name="author" content="Lusoi Gardens" />
  <meta name="robots" content={noindex ? 'noindex, nofollow' : 'index, follow'} />
  <meta name="language" content="English" />
  <meta name="revisit-after" content="7 days" />
  
  <!-- Canonical URL -->
  <link rel="canonical" href={currentUrl} />
  
  <!-- Open Graph / Facebook -->
  <meta property="og:type" content="website" />
  <meta property="og:url" content={currentUrl} />
  <meta property="og:title" content={title} />
  <meta property="og:description" content={description} />
  <meta property="og:image" content={fullImageUrl} />
  <meta property="og:image:width" content="1200" />
  <meta property="og:image:height" content="630" />
  <meta property="og:site_name" content="Lusoi Gardens" />
  <meta property="og:locale" content="en_US" />
  
  <!-- Twitter -->
  <meta name="twitter:card" content="summary_large_image" />
  <meta name="twitter:url" content={currentUrl} />
  <meta name="twitter:title" content={title} />
  <meta name="twitter:description" content={description} />
  <meta name="twitter:image" content={fullImageUrl} />
  
  <!-- Structured Data (JSON-LD) -->
  <script type="application/ld+json" set:html={JSON.stringify(finalStructuredData)}></script>
  
  <!-- Favicon -->
  <link rel="icon" type="image/png" href="/images/lusoi-gardens-logo.png" />
  <link rel="apple-touch-icon" href="/images/lusoi-gardens-logo.png" />
  
  <link href="https://fonts.googleapis.com/css?family=Poppins:200,300,400,500,600,700" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css?family=Playfair+Display:400,400i,700,700i" rel="stylesheet">

  <link rel="stylesheet" href="/css/open-iconic-bootstrap.min.css">
  <link rel="stylesheet" href="/css/animate.css">
  
  <link rel="stylesheet" href="/css/owl.carousel.min.css">
  <link rel="stylesheet" href="/css/owl.theme.default.min.css">
  <link rel="stylesheet" href="/css/magnific-popup.css">

  <link rel="stylesheet" href="/css/aos.css">

  <link rel="stylesheet" href="/css/ionicons.min.css">

  <link rel="stylesheet" href="/css/bootstrap-datepicker.css">
  <link rel="stylesheet" href="/css/jquery.timepicker.css">

  
  <link rel="stylesheet" href="/css/flaticon.css">
  <link rel="stylesheet" href="/css/icomoon.css">
  <link rel="stylesheet" href="/css/style.css">
</head>
<body>

  <Navbar activePage={activePage} />

  <slot />

  <Footer />

  <script is:inline src="/js/jquery.min.js"></script>
  <script is:inline src="/js/jquery-migrate-3.0.1.min.js"></script>
  <script is:inline src="/js/popper.min.js"></script>
  <script is:inline src="/js/bootstrap.min.js"></script>
  <script is:inline src="/js/jquery.easing.1.3.js"></script>
  <script is:inline src="/js/jquery.waypoints.min.js"></script>
  <script is:inline src="/js/jquery.stellar.min.js"></script>
  <script is:inline src="/js/owl.carousel.min.js"></script>
  <script is:inline src="/js/jquery.magnific-popup.min.js"></script>
  <script is:inline src="/js/aos.js"></script>
  <script is:inline src="/js/jquery.animateNumber.min.js"></script>
  <script is:inline src="/js/jquery.mb.YTPlayer.min.js"></script>
  <script is:inline src="/js/bootstrap-datepicker.js"></script>
  <!-- // <script is:inline src="/js/jquery.timepicker.min.js"></script> -->
  <script is:inline src="/js/scrollax.min.js"></script>
  <script is:inline src="https://maps.googleapis.com/maps/api/js?key=AIzaSyBVWaKrjvy3MaE7SQ74_uJiULgl1JY0H2s&amp;sensor=false"></script>
  <script is:inline src="/js/google-map.js"></script>
  <script is:inline src="/js/main.js"></script>
    
</body>
</html>

